# Scripts Documentation

This directory contains automation and utility scripts for the CoastSat Shoreline Publication system.

## Scripts Overview

### `create_publication.sh`
**Purpose**: Automated GitHub release creation for publication.crate  
**Usage**: `./create_publication.sh [SITE_ID]`  
**Description**: Complete workflow that regenerates publication.crate, creates GitHub releases, and embeds release URLs into the crate metadata.

**Key Features:**
- Regenerates publication.crate using `src/crate_builder.py`
- Creates timestamped GitHub releases with ZIP downloads
- Patches crate metadata with release URLs using `patch_post_release.py`
- Handles git operations and error recovery

### `patch_post_release.py`
**Purpose**: Add release URLs to publication.crate metadata post-release  
**Usage**: `python patch_post_release.py <RELEASE_URL>`  
**Description**: Updates the mainEntity URL in the RO-Crate metadata to point to the GitHub release.

**Key Features:**
- Loads existing publication.crate using ROCrate library
- Updates mainEntity URL property
- Comprehensive error handling and logging
- Validates crate structure before patching

## Dependencies

- **GitHub CLI (gh)**: Required for `create_publication.sh` to create releases
- **ROCrate Python library**: Required for `patch_post_release.py` to manipulate crate metadata
- **Git**: Required for version control operations

## Authentication

GitHub CLI must be authenticated:
```bash
gh auth login
```

For permission issues, scripts may need to be run with `sudo`:
```bash
sudo ./create_publication.sh aus0001
```

## Integration

These scripts integrate with the main publication system located in `src/`:
- Uses `src/crate_builder.py` to generate publication.crate
- Operates on crates generated by `src/publication_logic.py`
- Maintains compatibility with the dual execution mode system
